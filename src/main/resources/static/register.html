<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style1.css">
</head>
<body>
<div class="register-container">
    <h1>注册页面</h1>
    <form>
        <label for="username">请输入用户名:</label>
        <input type="text" id="username" name="username" required>
        <label for="password">请输入密码:</label>
        <input type="password" id="password" name="password" required>
        <label for="code">验证码:</label>
        <input type="text" id="code" name="code" required style="width: 100px">
        <img src="/codeImage" onclick="changeImage(this);" style="positionn:relative;top:20px"/>
        <button type="button" class="btn">注册</button>
        <a href="login.html">跳转登入页面</a>

    </form>
</div>
</body>
</html>
<script src="/js/axios.min.js"></script>
<script>
    let btn = document.querySelector(".btn");
    btn.onclick = function (){
        //获取username和password的值发送给服务器(后端)
        let username = document.querySelector("#username").value;
        let password = document.querySelector("#password").value;
        let code = document.querySelector("#code").value;
        axios({
            url:"http://localhost:8081/tUser/register",
            method:"post",
            data:{
                account : username,
                password : password,
                code:code
            }
        }).then((result)=>{
            console.log(result)
            if (result.data.code==200){
                alert("注册成功");
                location.href="/login.html";
            }else if (result.data.code==306){
                alert("验证码错误")
            ;}
            else{
                alert("注册错误");
            }
        })
    }
    function  changeImage(img){
        img.src="/codeImage?time="+new Date();
    }
</script>